<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="StudyMateProject.Views.TextNotePage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:StudyMateProject.ViewModels"
    x:DataType="viewmodels:TextNoteViewModel"
    Title="{Binding Title}">

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Сохранить" Command="{Binding SaveNoteCommand}" IconImageSource="icon_save.png" />
        <ToolbarItem Text="Экспорт" IconImageSource="icon_export.png">
            <ToolbarItem.Command>
                <MultiBinding Converter="{StaticResource ExportCommandConverter}">
                    <Binding Path="ExportNoteCommand" />
                    <Binding Source="txt" />
                </MultiBinding>
            </ToolbarItem.Command>
        </ToolbarItem>
    </ContentPage.ToolbarItems>

    <Grid RowDefinitions="Auto,*" ColumnDefinitions="*" Padding="10">
        <!-- Title Entry -->
        <Frame Grid.Row="0" Padding="5" BorderColor="{DynamicResource Primary}" CornerRadius="8">
            <Entry Placeholder="Заголовок заметки" Text="{Binding Note.Title}" FontSize="18" />
        </Frame>

        <!-- Content Editor -->
        <Frame Grid.Row="1" Padding="5" BorderColor="{DynamicResource Secondary}" CornerRadius="8" Margin="0,10,0,0">
            <Editor Placeholder="Напишите вашу заметку здесь..." 
                   Text="{Binding Content}" 
                   AutoSize="TextChanges"
                   VerticalOptions="FillAndExpand"
                   HorizontalOptions="FillAndExpand"/>
        </Frame>
    </Grid>
</ContentPage>